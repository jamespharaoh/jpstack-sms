<record
	name="shnProductImage"
	type="common">

	<fields>

		<!-- id -->

		<generated-id-field/>

		<!-- identity -->

		<parent-field
			name="product"
			type="shnProduct"/>

		<index-field/>

		<!-- details -->

		<description-field/>
		<deleted-field/>
		<active-field/>

		<!-- settings -->

		<reference-field
			name="originalMedia"
			type="media"/>

		<!-- data -->

		<reference-field
			name="normalisedMedia"
			type="media"/>

		<!-- statistics -->

		<timestamp-field
			name="createTime"
			column-type="postgresql"/>

		<timestamp-field
			name="updateTime"
			column-type="postgresql"/>

		<timestamp-field
			name="normaliseTime"
			column-type="postgresql"/>

		<!-- shopify data -->

		<integer-field
			name="shopifyId"
			nullable="yes"/>

		<timestamp-field
			name="shopifyCreatedAt"
			column-type="postgresql"
			nullable="yes"/>

		<timestamp-field
			name="shopifyUpdatedAt"
			column-type="postgresql"
			nullable="yes"/>

		<string-field
			name="shopifySrc"
			nullable="yes"/>

	</fields>

	<background-processes>

		<background-process
			object-type="shn-product-image"
			name="Normalise"
			description="Normalise shopping nation product images"
			frequency="20 seconds"/>

	</background-processes>

</record>